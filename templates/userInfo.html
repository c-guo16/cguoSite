{% extends "base.html" %}

{% block head %}
    <title>User Info</title>
    <style type="text/css">
        div#paper_area{
            width:800px;
            height:400px;
            margin:30px auto;
            padding-top: 50px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px #333333 ;
            background-color: #ececec;
        }
        p#title{
            font-size: 30px;
            text-align: center;
            letter-spacing: 8px;
        }
        p.item{
            margin-left: 250px;
            font-size: 20px;
        }
    </style>
{% endblock %}

{% block content %}
    <div id="paper_area">
        <p id="title">用户信息</p>
        <p class="item">用户名：<span id="username"></span></p>
        <p class="item">邮箱：<span id="email"></span></p>
        <p class="item">帐号状态：<span id="isActive"></span></p>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        $(document).ready(function () {
            $.ajax({
                type: "POST",
                url: "/postUserInfo",
                data:{"username":{{request.session.user_name}},
                        csrfmiddlewaretoken: '{{ csrf_token }}'},
                success:function (result) {
                    document.getElementById("username").innerText={{ request.session.user_name }};
                    document.getElementById("email").innerText=result.email;
                    if(result.isActive===true)
                        document.getElementById("isActive").innerText="已激活";
                    else
                        document.getElementById("isActive").innerText="未激活";
                }
            })
        })
    </script>
{% endblock %}